<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/location.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/eye.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/earth.png">
  <link rel="mask-icon" href="/images/ikun.png" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="应用是应用，驱动是驱动！你要是偏要应用干驱动，哥们，你怎么不直接薪资翻倍啊！[🦀]">
<meta property="og:type" content="website">
<meta property="og:title" content="我要成为嵌入式高手[doge]">
<meta property="og:url" content="http://example.com/page/6/index.html">
<meta property="og:site_name" content="我要成为嵌入式高手[doge]">
<meta property="og:description" content="应用是应用，驱动是驱动！你要是偏要应用干驱动，哥们，你怎么不直接薪资翻倍啊！[🦀]">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="CSM">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/page/6/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>我要成为嵌入式高手[doge]</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">我要成为嵌入式高手[doge]</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="tags fa-fw"></i>标签<span class="badge">45</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="th fa-fw"></i>分类<span class="badge">10</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="archive fa-fw"></i>归档<span class="badge">127</span></a>

  </li>
        <li class="menu-item menu-item-resources">

    <a href="/resources/" rel="section"><i class="download fa-fw"></i>嵌入式资源</a>

  </li>
        <li class="menu-item menu-item-公益">

    <a href="https://gongyi.qq.com/" rel="noopener" target="_blank"><i class="bilibili_icon fa-fw"></i>公益</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/08/14/TCP-UDP%E9%80%9A%E4%BF%A1%E5%BA%94%E7%94%A8%E5%B1%82/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/csm.png">
      <meta itemprop="name" content="CSM">
      <meta itemprop="description" content="应用是应用，驱动是驱动！你要是偏要应用干驱动，哥们，你怎么不直接薪资翻倍啊！[🦀]">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我要成为嵌入式高手[doge]">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/08/14/TCP-UDP%E9%80%9A%E4%BF%A1%E5%BA%94%E7%94%A8%E5%B1%82/" class="post-title-link" itemprop="url">TCP\UDP通信应用层</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-08-14 23:28:14" itemprop="dateCreated datePublished" datetime="2024-08-14T23:28:14+08:00">2024-08-14</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
      
    </div>

    
    
    

    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/08/14/scp-tfpt-ftp%E4%BC%A0%E8%BE%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/csm.png">
      <meta itemprop="name" content="CSM">
      <meta itemprop="description" content="应用是应用，驱动是驱动！你要是偏要应用干驱动，哥们，你怎么不直接薪资翻倍啊！[🦀]">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我要成为嵌入式高手[doge]">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/08/14/scp-tfpt-ftp%E4%BC%A0%E8%BE%93/" class="post-title-link" itemprop="url">scp tfpt ftp传输</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-08-14 23:27:57" itemprop="dateCreated datePublished" datetime="2024-08-14T23:27:57+08:00">2024-08-14</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
      
    </div>

    
    
    

    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/08/14/%E6%8C%82%E8%BD%BD%E7%BD%91%E7%BB%9C%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/csm.png">
      <meta itemprop="name" content="CSM">
      <meta itemprop="description" content="应用是应用，驱动是驱动！你要是偏要应用干驱动，哥们，你怎么不直接薪资翻倍啊！[🦀]">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我要成为嵌入式高手[doge]">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/08/14/%E6%8C%82%E8%BD%BD%E7%BD%91%E7%BB%9C%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/" class="post-title-link" itemprop="url">挂载网络文件系统</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-08-14 23:27:11" itemprop="dateCreated datePublished" datetime="2024-08-14T23:27:11+08:00">2024-08-14</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
      
    </div>

    
    
    

    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/08/14/uboot/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/csm.png">
      <meta itemprop="name" content="CSM">
      <meta itemprop="description" content="应用是应用，驱动是驱动！你要是偏要应用干驱动，哥们，你怎么不直接薪资翻倍啊！[🦀]">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我要成为嵌入式高手[doge]">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/08/14/uboot/" class="post-title-link" itemprop="url">uboot</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-08-14 23:24:20" itemprop="dateCreated datePublished" datetime="2024-08-14T23:24:20+08:00">2024-08-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-09-08 00:41:27" itemprop="dateModified" datetime="2024-09-08T00:41:27+08:00">2024-09-08</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h5 id="linux设备启动过程"><a href="#linux设备启动过程" class="headerlink" title="linux设备启动过程"></a>linux设备启动过程</h5><p>一开始就是芯片厂商的引导程序了，然后就到uboot，接着加载内核和驱动，挂载根文件系统，加载虚拟文件系统，加载tty中断，自启动开机脚本和软件。</p>
<h5 id="uboot"><a href="#uboot" class="headerlink" title="uboot"></a>uboot</h5><p>uboot 属于<a target="_blank" rel="noopener" href="https://www.baidu.com/s?wd=bootloader&tn=24004469_oem_dg&rsv_dl=gh_pl_sl_csd">bootloader</a>的一种，是用来引导启动内核的，它的最终目的就是，从flash中读出内核，放到内存中，启动内核</p>
<p>所以，由上面描述的，就知道，UBOOT需要具有读写flash的能力。</p>
<h5 id="uboot使用"><a href="#uboot使用" class="headerlink" title="uboot使用"></a>uboot使用</h5><p>uboot刚开始被放到flash中，板子上电后，会自动把其中的一部分代码拷到内存中执行，这部分代码负责把剩余的uboot代码拷到内存中，然后uboot代码再把<a target="_blank" rel="noopener" href="https://www.baidu.com/s?wd=kernel&tn=24004469_oem_dg&rsv_dl=gh_pl_sl_csd">kernel</a>部分代码也拷到内存中，并且启动，内核启动后，挂着根文件系统，执行应用程序。</p>
<h5 id="为什么要uboot"><a href="#为什么要uboot" class="headerlink" title="为什么要uboot"></a>为什么要uboot</h5><p>1)uboot主要作用是用来启动<a target="_blank" rel="noopener" href="https://www.baidu.com/s?wd=%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%86%85%E6%A0%B8&tn=24004469_oem_dg&rsv_dl=gh_pl_sl_csd">操作系统内核</a>。体现在uboot最后一句代码就是启动内核。<br>2)uboot还要负责部署整个计算机系统。体现在uboot最后的传参。3)uboot中还有操作Flash等板子上硬件的驱动。例如串口要打印，ping网络成功，擦除、烧写flash是否成功等。<br>4)uboot还得提供一个命令行界面供人来操作。很简单，至少你能看到。</p>
<p>计算机系统的组成部件非常多，不同的计算机系统组成部件也不同。但是所有的计算机系统运行时需要的主要核心部件都是3个东西：CPU + 外部存储器（Flash&#x2F;硬盘） + 内部存储器（DDR SDRAM&#x2F;SDRAM&#x2F;SRAM）。而一般的PC机启动过程为：PC上电后先执行BIOS程序（实际上PC的BIOS就是NorFlash），BIOS程序负责初始化DDR内存，负责初始化硬盘，然后从硬盘上将OS镜像读取到DDR中，然后跳转到DDR中去执行OS直到启动（OS启动后BIOS就无用了）。</p>
<h5 id="uboot环境变量"><a href="#uboot环境变量" class="headerlink" title="uboot环境变量"></a>uboot环境变量</h5><h5 id="uboot修改"><a href="#uboot修改" class="headerlink" title="uboot修改"></a>uboot修改</h5><h5 id="uboot烧写"><a href="#uboot烧写" class="headerlink" title="uboot烧写"></a>uboot烧写</h5><h5 id="uboot和裸机"><a href="#uboot和裸机" class="headerlink" title="uboot和裸机"></a>uboot和裸机</h5><p>一般uboot都是有一个开机时间，也就是倒计时，这个期间进行任意键输入就会取消加载内核，从而变成变成裸机开发。</p>
<p>此时就是跟51的单片机开发一样了，对着手册看着寄存器进行编写，然后把代码编译完毕，ftp传到特定地址，然后去运行那个地址的代码，就是裸机运行了，不过这个一般只是用来测试硬件的而已，不会真的裸机开发的。</p>
<h5 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h5>
      
    </div>

    
    
    

    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/08/14/img%E5%92%8Ciso/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/csm.png">
      <meta itemprop="name" content="CSM">
      <meta itemprop="description" content="应用是应用，驱动是驱动！你要是偏要应用干驱动，哥们，你怎么不直接薪资翻倍啊！[🦀]">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我要成为嵌入式高手[doge]">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/08/14/img%E5%92%8Ciso/" class="post-title-link" itemprop="url">img和iso</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-08-14 23:23:44" itemprop="dateCreated datePublished" datetime="2024-08-14T23:23:44+08:00">2024-08-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-11-11 23:46:29" itemprop="dateModified" datetime="2024-11-11T23:46:29+08:00">2024-11-11</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h5 id="什么地方用到了ISO？"><a href="#什么地方用到了ISO？" class="headerlink" title="什么地方用到了ISO？"></a>什么地方用到了ISO？</h5><p>这里的iso，可不是网络七层协议&#x2F;OSI七层模型。</p>
<p>这刚入门linux，搞VMware虚拟机的都应该见过，但是，当时大家都是萌新嘛，谁记得那么多东西，库库一顿导入，虚拟机跑起来就高兴了，然后就是跟着那些博客、手册一步步配置环境了。</p>
<p>这里就用一个镜像系统，也就是ISO，是有人把ubuntu、Debian这类系统拷贝了一份得到了镜像，生成了ISO格式，然后VMware虚拟机才能加载系统，才能干之后的事情。这样一说，估计大家就有印象了。</p>
<h5 id="IMG又是啥？"><a href="#IMG又是啥？" class="headerlink" title="IMG又是啥？"></a>IMG又是啥？</h5><h5 id="两者差异是什么？"><a href="#两者差异是什么？" class="headerlink" title="两者差异是什么？"></a>两者差异是什么？</h5><h5 id="我想要搞一个自己的系统"><a href="#我想要搞一个自己的系统" class="headerlink" title="我想要搞一个自己的系统"></a>我想要搞一个自己的系统</h5><h5 id="ISO怎么生成"><a href="#ISO怎么生成" class="headerlink" title="ISO怎么生成"></a>ISO怎么生成</h5><h5 id="IMG怎么生成"><a href="#IMG怎么生成" class="headerlink" title="IMG怎么生成"></a>IMG怎么生成</h5><h5 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h5><p>都是加载系统的，不过，两者差异还是比较大，一个类似hex，一个类似bin，但是他们的目的都是一样为了得到一个系统镜像。</p>

      
    </div>

    
    
    

    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/07/16/%E7%BC%93%E5%86%B2%E5%8C%BA%E5%92%8C%E6%97%A5%E5%BF%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/csm.png">
      <meta itemprop="name" content="CSM">
      <meta itemprop="description" content="应用是应用，驱动是驱动！你要是偏要应用干驱动，哥们，你怎么不直接薪资翻倍啊！[🦀]">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我要成为嵌入式高手[doge]">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/07/16/%E7%BC%93%E5%86%B2%E5%8C%BA%E5%92%8C%E6%97%A5%E5%BF%97/" class="post-title-link" itemprop="url">缓冲区和日志</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2024-07-16 23:19:58 / 修改时间：23:41:43" itemprop="dateCreated datePublished" datetime="2024-07-16T23:19:58+08:00">2024-07-16</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h5 id="Linux的缓冲区"><a href="#Linux的缓冲区" class="headerlink" title="Linux的缓冲区"></a>Linux的缓冲区</h5><h5 id="重定向"><a href="#重定向" class="headerlink" title="重定向"></a>重定向</h5><h5 id="文件标识符"><a href="#文件标识符" class="headerlink" title="文件标识符"></a>文件标识符</h5><h5 id="日志系统"><a href="#日志系统" class="headerlink" title="日志系统"></a>日志系统</h5><h5 id="历史操作"><a href="#历史操作" class="headerlink" title="历史操作"></a>历史操作</h5><h5 id="操作查询"><a href="#操作查询" class="headerlink" title="操作查询"></a>操作查询</h5>
      
    </div>

    
    
    

    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/07/16/tty%E7%BB%88%E7%AB%AF/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/csm.png">
      <meta itemprop="name" content="CSM">
      <meta itemprop="description" content="应用是应用，驱动是驱动！你要是偏要应用干驱动，哥们，你怎么不直接薪资翻倍啊！[🦀]">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我要成为嵌入式高手[doge]">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/07/16/tty%E7%BB%88%E7%AB%AF/" class="post-title-link" itemprop="url">tty终端</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2024-07-16 22:53:49 / 修改时间：23:39:59" itemprop="dateCreated datePublished" datetime="2024-07-16T22:53:49+08:00">2024-07-16</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h5 id="起因"><a href="#起因" class="headerlink" title="起因"></a>起因</h5><p>无聊摸鱼，突然看到一个进度条一样。我就想到了这个进度条是怎么实现的呢？我们下载软件，下载插件，下载东西，编译的时候都可能会出现tty终端的进度条。我就好奇了，cmd和shell那些终端这个命令行不应该是输出一行的吗？就像我串口打印出来的东西，不可能把我已经输出的东西，在显示端删掉啊，在重新打印一边的，肯定就是换行处理了，这个不换行又覆盖打印是怎么做到的呢？</p>
<h5 id="区别"><a href="#区别" class="headerlink" title="区别"></a>区别</h5><p>我们一般进行调试，有232也有串口进行对MCU、MPU、ARM-A板子的串口调试，这个时候，处理器是直接使用串口打印的，就是把串口缓冲区立马的数据输出出来，发送给我，而我在把他显示出来，因为，显示肯定是不能丢失接收数据和信息，所以，就会全部打印，换行打印。所以来一条打印一下，显示一条符合要求和调试。</p>
<p>这里就有一个误区了，因为我们使用tty的时候，还没输出出去哦！</p>
<p>这个什么意思呢？意思就是我们这个系统还没对外输出而是内部操作，此时tty不是一个串口输出的过程，而是，直接读取一个缓冲区内部的数据。没错，tty就是一个缓冲区，它不是日志系统，不会记录所有操作，记录操作是其他功能做的，它就是一个缓冲区，也就是说，我们做的一大堆操作，其实都是在缓冲区里进行的操作，此时都没对外输出，当然可以覆盖自己缓冲区数据，然后tty显示这个缓冲区数据。当然，其他的打印和日志系统就会把每个操作，每个情况，每个数据都记录下来啊。</p>
<h5 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h5><p>此时直接使用回车就可以，清空本行，重新覆盖输出了，就可以实现进度条的操作了。<br>这里还有一点就是回车和换行，回车是\r  换行是\n;<br>我们在学c语言的时候，肯定打印函数和输入函数也即是scanf和printf这两里面用了很多换行，也经常会发现他们两个的效果是很相似。这是因为发送完毕，换行会直接清空缓冲区，而回车是回到首行开头，这个就有点文件io的光标的味道了，缓冲区清空了，这个时候回车肯定就是原地蹦一下而已嘛。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">mark=<span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">for</span> ((ratio=<span class="number">0</span>;<span class="variable">$&#123;ratio&#125;</span>&lt;=<span class="number">100</span>;ratio+=<span class="number">5</span>))</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">        <span class="built_in">sleep</span> 0.2</span><br><span class="line">        <span class="built_in">printf</span> <span class="string">&quot;progress:[%-40s]%d%%\r&quot;</span> <span class="string">&quot;<span class="variable">$&#123;mark&#125;</span>&quot;</span> <span class="string">&quot;<span class="variable">$&#123;ratio&#125;</span>&quot;</span></span><br><span class="line">        mark=<span class="string">&quot;##<span class="variable">$&#123;mark&#125;</span>&quot;</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h5><p>tty终端不是日志系统，它是一个收发缓冲区，它显示的内容是它缓冲区的内容，此时都没对外输出，所以它不会显示所有情况、数据、消息，只会显示缓冲区里有东西。此时，想要覆盖上一次的结果，echo就不要换行 -ne 此时直接回车到开头，然后清空本行，输出就好了，这个是只能在终端才能实现的哦。如果使用那种rt-thread那种FinSH控制台，这个就是串口输出啦，就是对外输出了，此时修改缓冲区是亡羊补牢了，因为缓冲区的数据已经被打印出来了，自然在显示端就会出现换行，而且无法覆盖上一行的操作，也无法实现进度条了捏，呜呜呜。</p>

      
    </div>

    
    
    

    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/07/15/%E9%9D%A2%E5%90%91%E7%94%9F%E4%BA%A7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/csm.png">
      <meta itemprop="name" content="CSM">
      <meta itemprop="description" content="应用是应用，驱动是驱动！你要是偏要应用干驱动，哥们，你怎么不直接薪资翻倍啊！[🦀]">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我要成为嵌入式高手[doge]">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/07/15/%E9%9D%A2%E5%90%91%E7%94%9F%E4%BA%A7/" class="post-title-link" itemprop="url">面向生产</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-07-15 22:49:13" itemprop="dateCreated datePublished" datetime="2024-07-15T22:49:13+08:00">2024-07-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-11-20 00:23:04" itemprop="dateModified" datetime="2024-11-20T00:23:04+08:00">2024-11-20</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h5 id="电源问题"><a href="#电源问题" class="headerlink" title="电源问题"></a>电源问题</h5><p>这个问题，非常容易忽略，也就是，目标设备是否有外部电源或者内部电源。这个问题会影响到生产中的一些措施，设置连开发过程都会影响。</p>
<ul>
<li><p>一直使用swdio进行debug，却没注意到，这个swdio的vcc已经承担了供电的职责，可能会忽略没有供电的时候出现的异常bug。其实，内部线路，可能是有问题的，但是供电有了反而一切都是正常的，很可能硬件握手失败都开不了机呢。常见于热插拔设备上面。</p>
</li>
<li><p>外部电源，这个电源是多大的，这个电源太大了怎么办，工人进行装配的会不会出现需要外部供电才能进行处理的操作，如何升级，如何操作等。</p>
</li>
<li><p>内部电源，这个常见就是低功耗问题了，要知道一个设备的寿命，可以用多久，一般都是按照几年来处理的，一些物联网设备，或者可以外接电源的时候随便充电的策略。</p>
</li>
<li><p>发热问题，这个其实很多时候也是会影响设备运行的，cpu和gpu那些都是要散热的，同理，你的温度可能会到值金属变形，可能导致电机行程异常，主控宕机，硬件损毁等诸多问题</p>
</li>
</ul>
<h5 id="生产顺序"><a href="#生产顺序" class="headerlink" title="生产顺序"></a>生产顺序</h5><p>这个问题，还是在电子件、模块、结构之间的顺序问题。</p>
<ul>
<li>后配置电子件，然后通过外部来进行标定和升级，这个常见于传感器和adc上面，因为只有结构装备完毕才能保证数据是正确无误的。</li>
<li>先配置电子件，就是比如序列号啥的的，一些协议，数据，功能啥的，都不需要外部结构，而是可以通过模块来实现操作的，这个就不用担心外部的结构了，所以可以先配置好电子件，然后在安装。</li>
<li>模块和结构，这个可以认为模块和结构合二为一，又或者说只有结构，模块就是普通的引脚电平啥的，这个时候就看是否是传感器类型的了，只是电平开关的话，就非常好处理了。</li>
</ul>
<h5 id="标准治具"><a href="#标准治具" class="headerlink" title="标准治具"></a>标准治具</h5><p>也是一个生产规格的问题了，电机、adc、大小、孔径等，这些一系列的东西都是需要一个标准来检测和处理，这个时候就需要治具了</p>
<ul>
<li><p>电机治具，这个就是检测在行程之内的速度、电流、行程等处理，也可以在电机上面添加霍尔传感器来知道此时电机位置等方法，来确保电机是正常的，这样就组装了</p>
</li>
<li><p>孔径治具，可以直接发射光束来作为标准，上面发送，下面接收，就知道误差范围了，这个治具设计就非常复杂和严谨，还得注意考虑灯丝温度和治具措施，一般都是购买国外进口的专门测试工具</p>
</li>
<li><p>通信治具，写好一个设备，肯定需要快速检测，一般用于测试从机，因为工人是不懂代码的，只想快速验证。所以，一个比较简单，比较快速验证产品正常的东西是利于生产和检测的。</p>
</li>
<li><p>老化治具，就是专门用来跑的，超频，提速，升温，升压，低温等处理，这个就是为了检测寿命的，一般是老化柜那样的东西，不过，想要自己做一个快速测试，也不难的。</p>
</li>
<li><p>长度治具，这个就是尺子了，没啥好说的了。最多是来规定一些电机的运行行程，来保证统一。</p>
<p>还有很多奇奇怪怪的治具。</p>
</li>
</ul>
<h5 id="测试日志"><a href="#测试日志" class="headerlink" title="测试日志"></a>测试日志</h5><p>测试的时候，最好有记录和日志，这样方便bug复现和审查。</p>
<p>所以，串口数据，如果可以还是保留一下，linux的话，就是echo打印出来，重定向输出到专门的日志文件。这个就是看个人习惯了。运维的肯定就非常熟悉了，这个肯定是必不可失的部分，如果连复现都无法做到，这个bug也是根本不可能修复的。</p>
<h5 id="电气规则"><a href="#电气规则" class="headerlink" title="电气规则"></a>电气规则</h5><p>常见的ttl 232 485 can等那些电气特性，还有usb pcie m.2 等特有热插拔电气特性。</p>
<ul>
<li><p>就需要在生产的时候，注意设计防呆口，防止正负电源问题，还有设计一连串固定，唯一的组装流程，减少带来的外部干扰，还有带上静电环，人体静电还是有影响。</p>
</li>
<li><p>还有就是开发中，可能开发板的电气规则可以工作，但是pcb板子就不能工作，很可能是电平范围错误，导致的通信异常，此时程序是可以运行的，但是因为外部缺少上下拉、电容、电阻、甚至是相位差等问题，导致的无法通信，需要和硬件协商，找到合适的方法实现通信。</p>
</li>
</ul>
<h5 id="产品生产环境"><a href="#产品生产环境" class="headerlink" title="产品生产环境"></a>产品生产环境</h5><p>这个，实验室环境、无尘、温度、压强、电源等问题，都可能会导致传感器的误差，这些都是可以避免的，不过很多时候应该影响不大的，注意强磁强电、大噪声等环境问题、灰尘如果进入电路板很可能导致一些未知bug，最好也是杜绝为好。</p>
<h5 id="设备寿命和老化"><a href="#设备寿命和老化" class="headerlink" title="设备寿命和老化"></a>设备寿命和老化</h5><p>这个上面有一个老化治具的设计思路，其本质还是担心设备的耐久度，这个就非常值得考虑了，不能说，一个产品用两天就坏了，那谁还买啊，差评如潮。</p>
<p>但是，设备不是永久的，是一定有寿命的，一般是越是大型设备，寿命越长，越是消费电子，寿命越短，物联网设备，一般是几年左右，所以，这里就有内外电池的考虑，太阳能的考虑等</p>
<h5 id="工作环境差异"><a href="#工作环境差异" class="headerlink" title="工作环境差异"></a>工作环境差异</h5><p>设备工作区域，多热，外壳会不会化了，内部会不会积热，会不会进水，会不会受到干扰导致起振失败，导致内部emp，共振、振动环境导致螺丝和接口等松动、温度差异带来的传感器误差，电池寿命，电池电量这些都是非常大的问题，都是需要考虑进去的</p>
<h5 id="焊接和贴片机"><a href="#焊接和贴片机" class="headerlink" title="焊接和贴片机"></a>焊接和贴片机</h5><p>这个常常发生在pcb生产中，因为国产贴片机的问题太多了，抛料都是正常的现象，后续硬件工程师虚焊也是正常的东西，所以，就非常有必要治具了，确保电子件安装到产品设备之前是正常的。</p>
<h5 id="安全和高效检测设计"><a href="#安全和高效检测设计" class="headerlink" title="安全和高效检测设计"></a>安全和高效检测设计</h5><p>这个就是比如，安装空调外机，安装复杂大型设备，不方便拆卸等情况，就需要留一个专门的接口给外部，外部调试线连接测试，就可以立刻知道设备当前状态如何，是否可以确保正常运行，这个高效，同时也一定程度上增加了安全性。这样可以高效抽查，极大程度缩短检测时间，提高现场检测的能力。</p>
<p>自然安全性这个就是要单独拿出来分析的，产品外壳毒性，电路板毒性，任天堂以前的卡带上面就有一些化学物质，非常非常苦，就是为了防止人去舔以及误食，这个也是一个出于安全的设计。外部结构设计是否安全，电路内部电容，电路线，电源线，dc-dc模块等问题。不能像机革那样，自己电脑炸了，还怪用户，至少得保证自己产品不得爆炸吧，三星爆炸手机可是深得人心。</p>
<h5 id="运输结构设计"><a href="#运输结构设计" class="headerlink" title="运输结构设计"></a>运输结构设计</h5><p>不能说一个设备长的和刀子一样吧，也就是说，运输的时候，要么就是有配套的外壳和箱子，要么就是设计成方便运行的结构，这个都是机械佬考虑的了，主要还是以应用场景和大小为主。</p>
<h5 id="产品差异补偿"><a href="#产品差异补偿" class="headerlink" title="产品差异补偿"></a>产品差异补偿</h5><p>没人敢打包票说每个设备都是ok的，都是一模一样的，一定有残次品，这就是良品率了。优化生产过程，减少外界干扰，多用治具来保证产品的正常，增减检测工序，这个注定是没有最好，只有最适合了。</p>
<p>华为甚至更加过分，屏幕抽奖，一个手机的屏幕，几家厂商提供的产品，每个手机都想抽奖一样，这就导致了产品差异是非常大，如何软件进行调教，硬件去弥补，去做误差补偿，如色域、光亮、帧率等。这个问题是永远没有最佳方案的，都是就事论事，根据实际情况去分析和处理。</p>
<h5 id="生产安全"><a href="#生产安全" class="headerlink" title="生产安全"></a>生产安全</h5><p><strong>这个是重中之重，想都不要想，只要出了一条人命和残疾，那不得了，不只是赔钱的问题，而是生产线都可能出现大问题，带来连锁反应，带来的负面影响都是不可估量的。</strong></p>
<p>用电安全，设备摆放，工具摆放，特殊化学品处理区和存储区，禁止明火，不要堵路，地面防滑，尖锐突出，禁止打闹追逐，防夹，注意生产车间的机床注意实现，注意远离机床，不要为了效率而增加风险，一切高危都要做安全措施，不要靠近大型设备等诸多安全问题。</p>
<h5 id="代码设计和能力需求"><a href="#代码设计和能力需求" class="headerlink" title="代码设计和能力需求"></a>代码设计和能力需求</h5><p>作为公司项目，肯定不是做着玩的，也肯定不会只有一个，所以，不同的设备就有不同的序列号和参数属性了。同时就要求有可以使用、可以修改的接口。至于使用c cpp rust python 还是什么，只要能实现功能就是好语言，qt可以用python和cpp啊，EPS32和mcu开发也可以实现cpp和python，linux的话，建议还是c开发，也可以使用rust，还可以使用luna，有需求就可以去学习。语言知识一个工具，只要能实现功能就好了。</p>
<ul>
<li><p>引导程序</p>
</li>
<li><p>生产中特定flash读写序列号和特殊属性</p>
</li>
<li><p>多层引导设计思路</p>
</li>
<li><p>api接口和sdk设计</p>
</li>
<li><p>模块化编程思路</p>
</li>
<li><p>HAL、BSP、驱动等</p>
</li>
<li><p>模块调用</p>
</li>
<li><p>内外flash读取 和 特定地址读写</p>
</li>
<li><p>扩容预备 空间预留</p>
</li>
<li><p>section数据  attribute对齐规则</p>
</li>
<li><p>代码框架 (这个看公司的设计特点了)</p>
</li>
<li><p>外留接口来实现对外的通信，增加兼容性</p>
</li>
<li><p>技术栈 web、 后端 、app  、mcu 、mpu 、ui 、hmi、算法、运维、其他专业技术、代码和项目管理如gitee github、</p>
</li>
<li><p>静态库和动态库 linux和win的</p>
</li>
</ul>
<h5 id="产品代码加密"><a href="#产品代码加密" class="headerlink" title="产品代码加密"></a>产品代码加密</h5><p>要想办法做密钥之类的，东西，加密自己的程序，比如使用section这些来对重要函数进行加密，然后再写回flash，这个是一个很好的加密手段。</p>
<h5 id="上位机"><a href="#上位机" class="headerlink" title="上位机"></a>上位机</h5><p>一般产品尤其是控制，遥控，定位的设备，一般都是出异常后需要用户自行矫正的，这个时候，上位机就很有存在的必要，它往往需要跨平台，需要满足多设备，多屏幕。本质就是数据收发而已，不同产品需要校准和设计的上位机是不同的。其实有的时候，会考虑，为什么不用上位机，为什么用上位机呢？我感觉是要分场景的，比如我这里是生产工厂，生产工厂需要电脑吗？自然是除了烧录代码可能需要，测试，也是装机之后才能测试，所以，不存在一边烧录一边测试的太少了。</p>
<p>如果我们是直接面向工厂的，此时，开发一个上位机要考虑的东西，有很多的，电脑本身其实是一个不稳定，环境差异大，不实用的生产平台。而且员工很多都不会用电脑，电脑也容易误触。所以，一个生产治具是最好的了，可以先把代码烧录到治具中，在治具中进行烧录其他设备的操作，这样员工只要操作治具就好了，一个治具是比电脑稳定很多的，而且也不存在环境差异问题。</p>
<p>做过linux开发就知道了，linux难就难在环境配置，系统配置上，真的天差地别，时不时就是我这里运行正常，你那边就跑不了的bug，非常痛苦，如果我直接寄一个硬件治具过来，作为烧录、测试、标定的设备，那么一下子我们就成功同步了，对于直面工厂，生产来说，这个确实是比上位机可靠好用的。上位机更适合代码烧录，固件更新，用户自定义和调节，不适合生产，也不利于生产，治具效率高，体积小，速度快，上位机一般都是一对一，这就比不上治具可以一下子插上去一堆。</p>
<p>上位机的优势：适合客户自定义操作，更新，微调，这个算是售后，一般都是一对一进行操作，也可以用于给用户进行检修等操作。</p>
<p>治具的优势：对接工厂，同步环境和标准，增加生产效率，降低员工要求，设备可靠，可以实现一对多的高效生产需求和测试需求。</p>
<h5 id="统一标准"><a href="#统一标准" class="headerlink" title="统一标准"></a>统一标准</h5><p>这个怎么理解呢？不单单是产品的规格，还有就是产品的标准尺度，就像卷尺一样，施工场地的单位长度都不一样呢。</p>
<p>统一标准，就是啥都是一样的，所以，很简单，只要所有车间和工厂都是用一样的标准，就可以做到规范和误差容许。</p>
<p>还有一种就是目标是标准，但是初始配置是不一样的。比如，电机此时速度是100，另一个是200，一样的最大加速度，但是我都要跑2000米，使用pid进行调制之后，就要定位，这个就是需要一个标准。而且两个因为初始速度不一样，所以最后pid调制停下来的位置是不一样的，不过误差可以接受就行了，此时就可以进行一个数据定位，只要电机复位+运行时间，就可以运行到2000米，但是如果你把100的电机速度得到的运行时间给到了200的电机速度的电机时间，就会导致，误差增加，此时，就是违反了统一标准的规则，他们应该都是对其统一标准才对。</p>

      
    </div>

    
    
    

    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/07/15/%E6%B5%81%E5%BC%8F%E4%BC%A0%E8%BE%93%E5%92%8C%E6%B5%81%E5%AA%92%E4%BD%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/csm.png">
      <meta itemprop="name" content="CSM">
      <meta itemprop="description" content="应用是应用，驱动是驱动！你要是偏要应用干驱动，哥们，你怎么不直接薪资翻倍啊！[🦀]">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我要成为嵌入式高手[doge]">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/07/15/%E6%B5%81%E5%BC%8F%E4%BC%A0%E8%BE%93%E5%92%8C%E6%B5%81%E5%AA%92%E4%BD%93/" class="post-title-link" itemprop="url">流式传输和流媒体</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-07-15 21:32:14" itemprop="dateCreated datePublished" datetime="2024-07-15T21:32:14+08:00">2024-07-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-07-16 23:53:47" itemprop="dateModified" datetime="2024-07-16T23:53:47+08:00">2024-07-16</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h5 id="流"><a href="#流" class="headerlink" title="流"></a>流</h5><p>看名字就是知道了—猫是液体[doge]。我们根据日常习惯也知道液体这些东西，它会自己去钻缝，会流动，接触面积更大，可以适应很多结构，把液体倒入圆锥体里面，它就变成圆锥体的形态啦。</p>
<h5 id="文件IO和数据流"><a href="#文件IO和数据流" class="headerlink" title="文件IO和数据流"></a>文件IO和数据流</h5><h5 id="一切都是数据流"><a href="#一切都是数据流" class="headerlink" title="一切都是数据流"></a>一切都是数据流</h5><h5 id="流式传输"><a href="#流式传输" class="headerlink" title="流式传输"></a>流式传输</h5><h5 id="流媒体"><a href="#流媒体" class="headerlink" title="流媒体"></a>流媒体</h5><h5 id="TCP是一种流式协议"><a href="#TCP是一种流式协议" class="headerlink" title="TCP是一种流式协议"></a>TCP是一种流式协议</h5><h5 id="流带来了什么"><a href="#流带来了什么" class="headerlink" title="流带来了什么"></a>流带来了什么</h5><h5 id="流的缺点？"><a href="#流的缺点？" class="headerlink" title="流的缺点？"></a>流的缺点？</h5><h5 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h5>
      
    </div>

    
    
    

    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/07/15/DMA%E9%80%9A%E9%81%93%E5%92%8CDMA%E6%B5%81/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/csm.png">
      <meta itemprop="name" content="CSM">
      <meta itemprop="description" content="应用是应用，驱动是驱动！你要是偏要应用干驱动，哥们，你怎么不直接薪资翻倍啊！[🦀]">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我要成为嵌入式高手[doge]">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/07/15/DMA%E9%80%9A%E9%81%93%E5%92%8CDMA%E6%B5%81/" class="post-title-link" itemprop="url">DMA通道和DMA流</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2024-07-15 21:31:47 / 修改时间：23:02:50" itemprop="dateCreated datePublished" datetime="2024-07-15T21:31:47+08:00">2024-07-15</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h5 id="DMA"><a href="#DMA" class="headerlink" title="DMA"></a>DMA</h5><p>直接存储器访问，看这个名字就知道了，只要知道请求访问地址，访问地址，访问大小，访问模式，就可以实现地址之间的数据转移了。常见的SPI、IIC、USART等。配置好DMA、设置好地址、大小、模式，让CPU给DMA芯片发送这个命令，就会让DMA去干活了，中间cpu都不用管DMA，这就解放了CPU，去干那些耗时而且简单的访问操作。</p>
<h5 id="DMA回调"><a href="#DMA回调" class="headerlink" title="DMA回调"></a>DMA回调</h5><p>DMA有错误回调，传输一半回调，传输完毕回调，所以我们只需要在回调函数中进行处理就好了，触发中断获得cpu使用权，开干。注意要使用判断DMA是否HAL_OK的状态判断函数之后，才能使用收发哦。<br><em><strong>而且还有一点就是DMA不同那些外设一样，它本身是触发不了什么接收和发送的，SPI绑定DMA。比如SPI接收，是因为先触发了SPI的中断，因为CPU把DMA连接到一个存储器地址和SPI上了，所以才会触发SPI_DMA的接收完毕中断回调哦</strong></em></p>
<h5 id="DMA通道和DMA数据流"><a href="#DMA通道和DMA数据流" class="headerlink" title="DMA通道和DMA数据流"></a>DMA通道和DMA数据流</h5><h6 id="STM32F1系列（如STM32F103）"><a href="#STM32F1系列（如STM32F103）" class="headerlink" title="STM32F1系列（如STM32F103）"></a>STM32F1系列（如STM32F103）</h6><p>在STM32F1系列中，DMA有通道（Channel）的概念。每个DMA控制器有多个通道，每个通道可以配置为处理一个特定的外设数据流。每个通道有它自己的寄存器集合，用于配置源地址、目的地址、数据长度等。</p>
<h6 id="STM32F4系列（如STM32F407）"><a href="#STM32F4系列（如STM32F407）" class="headerlink" title="STM32F4系列（如STM32F407）"></a>STM32F4系列（如STM32F407）</h6><p>在STM32F4系列中，DMA有数据流（Stream）的概念。每个DMA控制器有多个数据流，每个数据流可以配置为处理一个特定的外设数据流。每个数据流有它自己的寄存器集合，用于配置源地址、目的地址、数据长度等。此外，STM32F4系列的DMA控制器还有FIFO（先入先出）机制，用于优化数据传输。</p>
<p>使用cube的时候，就会发现要么没有通道要么没有数据流，两者只有一个。因为他们使用也非常相似。</p>
<p>用F04举例子：</p>
<h6 id="数据流"><a href="#数据流" class="headerlink" title="数据流"></a>数据流</h6><p>每个DMA控制器有<code>8个</code>数据流，每个<strong>数据流</strong>都能够提供<code>源</code>和<code>目标</code>之间的<strong>单向传输链路</strong>。</p>
<p><img src="/../Blogas_images/%E4%BB%B2%E8%A3%81%E5%99%A8.png"></p>
<p>每个DMA控制器可以同时配置多个数据流，但在某一时刻只允许有一个数据流使用DMA控制器。当多个数据流同时请求时，由仲裁器决定哪一个数据流优先使用DMA控制器。</p>
<h6 id="通道"><a href="#通道" class="headerlink" title="通道"></a>通道</h6><p>  每个数据流有8个通道，每个通道映射到不同外设，这有利于针对不同的产品配置不同的DMA外设请求。每个数据流只能配置为映射到一个通道，无法配置为映射到多个通道。即，与数据流不同，每个DMA控制器可以同时配置多个数据流（因为有仲裁器），但每个数据流不能同时配置多个通道（因为只有选择器）。</p>
<p><img src="/../Blogas_images/DMA%E6%98%A0%E5%B0%841.png"></p>
<p><img src="/../Blogas_images/DMA%E6%98%A0%E5%B0%842.png"><br>仲裁器<br>  仲裁器用于在多个数据流同时请求时，解决请求冲突的问题。在硬件上，数据流的编号越低，请求优先级越高，仲裁器优先响应编号低的数据流。</p>
<p>  为实现更灵活的配置，数据流还可以设置软件优先级，软件优先级分为以下4个级别：</p>
<p>  — 非常高优先级<br>  — 高优先级<br>  — 中优先级<br>  — 低优先级</p>
<p>硬件：如果两个请求具有相同的软件优先级，则编号低的数据流优先于编号高的数据流<br>原文链接：<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44567318/article/details/114003967">https://blog.csdn.net/weixin_44567318/article/details/114003967</a></p>
<h5 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h5><p>其实用cube配置之后，用起来差不多的，我估计这个时候也没有使用标准库了吧，后面那些H系列的，比如H745还是异构双核的。反正大家也都是对着demo进行模仿的，只要代码能用是不是标准库都是一样用的。</p>

      
    </div>

    
    
    

    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/5/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><span class="space">&hellip;</span><a class="page-number" href="/page/13/">13</a><a class="extend next" rel="next" href="/page/7/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="CSM"
      src="/images/csm.png">
  <p class="site-author-name" itemprop="name">CSM</p>
  <div class="site-description" itemprop="description">应用是应用，驱动是驱动！你要是偏要应用干驱动，哥们，你怎么不直接薪资翻倍啊！[🦀]</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">127</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">45</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/define-error-0" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;define-error-0" rel="noopener" target="_blank"><i class="github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:csmznbo@gmail.com" title="E-Mail → mailto:csmznbo@gmail.com" rel="noopener" target="_blank"><i class="envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://bilibili.com/" title="https:&#x2F;&#x2F;bilibili.com" rel="noopener" target="_blank">B站</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://baidu.com/" title="https:&#x2F;&#x2F;baidu.com" rel="noopener" target="_blank">百度</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://fishc.com.cn/" title="https:&#x2F;&#x2F;fishc.com.cn" rel="noopener" target="_blank">鱼C论坛</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">CSM</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

 <div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">博客全站共87.4k字</span>
</div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
</div>








      </div>
    </footer>
  </div>

  
  
  <script color='0,0,255' opacity='0.5' zIndex='-1' count='99' src="/lib/canvas-nest/canvas-nest.min.js"></script>
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>


  <script defer src="/lib/three/three.min.js"></script>
    <script defer src="/lib/three/canvas_sphere.min.js"></script>


  















  

  

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"right","width":225,"height":450,"hOffset":-15,"vOffset":-15},"mobile":{"show":true},"react":{"opacity":0.7},"log":false});</script></body>
</html>
